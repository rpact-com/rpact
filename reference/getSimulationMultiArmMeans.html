<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><title>Get Simulation Multi-Arm Means — getSimulationMultiArmMeans • rpact</title><script src="../deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><link href="../deps/bootstrap-5.3.1/bootstrap.min.css" rel="stylesheet"><script src="../deps/bootstrap-5.3.1/bootstrap.bundle.min.js"></script><link href="../deps/font-awesome-6.5.2/css/all.min.css" rel="stylesheet"><link href="../deps/font-awesome-6.5.2/css/v4-shims.min.css" rel="stylesheet"><script src="../deps/headroom-0.11.0/headroom.min.js"></script><script src="../deps/headroom-0.11.0/jQuery.headroom.min.js"></script><script src="../deps/bootstrap-toc-1.0.1/bootstrap-toc.min.js"></script><script src="../deps/clipboard.js-2.0.11/clipboard.min.js"></script><script src="../deps/search-1.0.0/autocomplete.jquery.min.js"></script><script src="../deps/search-1.0.0/fuse.min.js"></script><script src="../deps/search-1.0.0/mark.min.js"></script><!-- pkgdown --><script src="../pkgdown.js"></script><meta property="og:title" content="Get Simulation Multi-Arm Means — getSimulationMultiArmMeans"><meta name="description" content="Returns the simulated power, stopping and selection probabilities, conditional power,
and expected sample size for testing means in a multi-arm treatment groups testing situation."><meta property="og:description" content="Returns the simulated power, stopping and selection probabilities, conditional power,
and expected sample size for testing means in a multi-arm treatment groups testing situation."><meta property="og:image" content="https://rpact-com.github.io/rpact/logo.png"><meta name="keywords" content="rpact, adaptive designs, clinical trials, simulation, analysis, rstats, Shiny, r-project, R package"><link href="reference/figures/favicon.ico" rel="icon"><link href="reference/figures/favicon.ico" rel="apple-touch-icon"><link href="reference/figures/favicon.ico" rel="shortcut icon" type="image/vnd.microsoft.icon"></head><body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>


    <nav class="navbar navbar-expand-lg fixed-top bg-light" data-bs-theme="light" aria-label="Site navigation"><div class="container">

    <a class="navbar-brand me-2" href="../index.html">rpact</a>

    <small class="nav-text text-muted me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="">4.1.1.9282</small>


    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto"><li class="active nav-item"><a class="nav-link" href="../reference/index.html">Reference</a></li>
<li class="nav-item dropdown">
  <button class="nav-link dropdown-toggle" type="button" id="dropdown-articles" data-bs-toggle="dropdown" aria-expanded="false" aria-haspopup="true">Articles</button>
  <ul class="dropdown-menu" aria-labelledby="dropdown-articles"><li><a class="dropdown-item" href="../articles/rpact_getting_started.html">Getting started with rpact</a></li>
  </ul></li>
<li class="nav-item"><a class="nav-link" href="../news/index.html">Changelog</a></li>
      </ul><ul class="navbar-nav"><li class="nav-item"><form class="form-inline" role="search">
 <input class="form-control" type="search" name="search-input" id="search-input" autocomplete="off" aria-label="Search site" placeholder="Search for" data-search-index="../search.json"></form></li>
<li class="nav-item"><a class="external-link nav-link" href="https://github.com/rpact-com/rpact/" aria-label="GitHub"><span class="fa fab fa-github fa-lg"></span></a></li>
      </ul></div>


  </div>
</nav><div class="container template-reference-topic">
<div class="row">
  <main id="main" class="col-md-9"><div class="page-header">
      <img src="../logo.png" class="logo" alt=""><h1>Get Simulation Multi-Arm Means</h1>
      <small class="dont-index">Source: <a href="https://github.com/rpact-com/rpact/blob/main/R/f_simulation_multiarm_means.R" class="external-link"><code>R/f_simulation_multiarm_means.R</code></a></small>
      <div class="d-none name"><code>getSimulationMultiArmMeans.Rd</code></div>
    </div>

    <div class="ref-description section level2">
    <p>Returns the simulated power, stopping and selection probabilities, conditional power,
and expected sample size for testing means in a multi-arm treatment groups testing situation.</p>
    </div>

    <div class="section level2">
    <h2 id="ref-usage">Usage<a class="anchor" aria-label="anchor" href="#ref-usage"></a></h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span><span class="fu">getSimulationMultiArmMeans</span><span class="op">(</span></span>
<span>  design <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  <span class="va">...</span>,</span>
<span>  activeArms <span class="op">=</span> <span class="fl">3L</span>,</span>
<span>  effectMatrix <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  typeOfShape <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"linear"</span>, <span class="st">"sigmoidEmax"</span>, <span class="st">"userDefined"</span><span class="op">)</span>,</span>
<span>  muMaxVector <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/seq.html" class="external-link">seq</a></span><span class="op">(</span><span class="fl">0</span>, <span class="fl">1</span>, <span class="fl">0.2</span><span class="op">)</span>,</span>
<span>  gED50 <span class="op">=</span> <span class="cn">NA_real_</span>,</span>
<span>  slope <span class="op">=</span> <span class="fl">1</span>,</span>
<span>  doseLevels <span class="op">=</span> <span class="cn">NA_real_</span>,</span>
<span>  intersectionTest <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"Dunnett"</span>, <span class="st">"Bonferroni"</span>, <span class="st">"Simes"</span>, <span class="st">"Sidak"</span>, <span class="st">"Hierarchical"</span><span class="op">)</span>,</span>
<span>  stDev <span class="op">=</span> <span class="fl">1</span>,</span>
<span>  adaptations <span class="op">=</span> <span class="cn">NA</span>,</span>
<span>  typeOfSelection <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"best"</span>, <span class="st">"rBest"</span>, <span class="st">"epsilon"</span>, <span class="st">"all"</span>, <span class="st">"userDefined"</span><span class="op">)</span>,</span>
<span>  effectMeasure <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"effectEstimate"</span>, <span class="st">"testStatistic"</span><span class="op">)</span>,</span>
<span>  successCriterion <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"all"</span>, <span class="st">"atLeastOne"</span><span class="op">)</span>,</span>
<span>  epsilonValue <span class="op">=</span> <span class="cn">NA_real_</span>,</span>
<span>  rValue <span class="op">=</span> <span class="cn">NA_real_</span>,</span>
<span>  threshold <span class="op">=</span> <span class="op">-</span><span class="cn">Inf</span>,</span>
<span>  plannedSubjects <span class="op">=</span> <span class="cn">NA_integer_</span>,</span>
<span>  allocationRatioPlanned <span class="op">=</span> <span class="cn">NA_real_</span>,</span>
<span>  minNumberOfSubjectsPerStage <span class="op">=</span> <span class="cn">NA_real_</span>,</span>
<span>  maxNumberOfSubjectsPerStage <span class="op">=</span> <span class="cn">NA_real_</span>,</span>
<span>  conditionalPower <span class="op">=</span> <span class="cn">NA_real_</span>,</span>
<span>  thetaH1 <span class="op">=</span> <span class="cn">NA_real_</span>,</span>
<span>  stDevH1 <span class="op">=</span> <span class="cn">NA_real_</span>,</span>
<span>  maxNumberOfIterations <span class="op">=</span> <span class="fl">1000L</span>,</span>
<span>  seed <span class="op">=</span> <span class="cn">NA_real_</span>,</span>
<span>  calcSubjectsFunction <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  selectArmsFunction <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  showStatistics <span class="op">=</span> <span class="cn">FALSE</span></span>
<span><span class="op">)</span></span></code></pre></div>
    </div>

    <div class="section level2">
    <h2 id="arguments">Arguments<a class="anchor" aria-label="anchor" href="#arguments"></a></h2>


<dl><dt id="arg-design">design<a class="anchor" aria-label="anchor" href="#arg-design"></a></dt>
<dd><p>The trial design. If no trial design is specified, a fixed sample size design is used.
In this case, Type I error rate <code>alpha</code>, Type II error rate <code>beta</code>, <code>twoSidedPower</code>,
and <code>sided</code> can be directly entered as argument where necessary.</p></dd>


<dt id="arg--">...<a class="anchor" aria-label="anchor" href="#arg--"></a></dt>
<dd><p>Ensures that all arguments (starting from the "...") are to be named and
that a warning will be displayed if unknown arguments are passed.</p></dd>


<dt id="arg-activearms">activeArms<a class="anchor" aria-label="anchor" href="#arg-activearms"></a></dt>
<dd><p>The number of active treatment arms to be compared with control, default is <code>3</code>.</p></dd>


<dt id="arg-effectmatrix">effectMatrix<a class="anchor" aria-label="anchor" href="#arg-effectmatrix"></a></dt>
<dd><p>Matrix of effect sizes with <code>activeArms</code> columns and number of rows
reflecting the different situations to consider.</p></dd>


<dt id="arg-typeofshape">typeOfShape<a class="anchor" aria-label="anchor" href="#arg-typeofshape"></a></dt>
<dd><p>The shape of the dose-response relationship over the treatment groups.
This can be either <code>"linear"</code>, <code>"sigmoidEmax"</code>, or <code>"userDefined"</code>,
default is <code>"linear"</code>.<br>
For <code>"linear"</code>, <code>muMaxVector</code> specifies the range
of effect sizes for the treatment group with highest response.
If <code>"sigmoidEmax"</code> is selected, <code>gED50</code> and <code>slope</code> has to be entered
to specify the ED50 and the slope of the sigmoid Emax model.
For <code>"sigmoidEmax"</code>, <code>muMaxVector</code> specifies the range
of effect sizes for the treatment group with response according to infinite dose.
If <code>"userDefined"</code> is selected, <code>effectMatrix</code> has to be entered.</p></dd>


<dt id="arg-mumaxvector">muMaxVector<a class="anchor" aria-label="anchor" href="#arg-mumaxvector"></a></dt>
<dd><p>Range of effect sizes for the treatment group with highest response
for <code>"linear"</code> and <code>"sigmoidEmax"</code> model, default is <code>seq(0, 1, 0.2)</code>.</p></dd>


<dt id="arg-ged-">gED50<a class="anchor" aria-label="anchor" href="#arg-ged-"></a></dt>
<dd><p>If <code>typeOfShape = "sigmoidEmax"</code> is selected, <code>gED50</code> has to be entered
to specify the ED50 of the sigmoid Emax model.</p></dd>


<dt id="arg-slope">slope<a class="anchor" aria-label="anchor" href="#arg-slope"></a></dt>
<dd><p>If <code>typeOfShape = "sigmoidEmax"</code> is selected, <code>slope</code> can be entered
to specify the slope of the sigmoid Emax model, default is 1.</p></dd>


<dt id="arg-doselevels">doseLevels<a class="anchor" aria-label="anchor" href="#arg-doselevels"></a></dt>
<dd><p>The dose levels for the dose response relationship.
If not specified, these dose levels are <code>1,...,activeArms</code>.</p></dd>


<dt id="arg-intersectiontest">intersectionTest<a class="anchor" aria-label="anchor" href="#arg-intersectiontest"></a></dt>
<dd><p>Defines the multiple test for the intersection
hypotheses in the closed system of hypotheses.
Five options are available in multi-arm designs: <code>"Dunnett"</code>, <code>"Bonferroni"</code>, <code>"Simes"</code>,
<code>"Sidak"</code>, and <code>"Hierarchical"</code>, default is <code>"Dunnett"</code>.</p></dd>


<dt id="arg-stdev">stDev<a class="anchor" aria-label="anchor" href="#arg-stdev"></a></dt>
<dd><p>The standard deviation under which the data is simulated,
default is <code>1</code>.
For two-armed trials, it is allowed to specify the standard deviations separately,
i.e., as vector with two elements.
If <code>meanRatio = TRUE</code> is specified, <code>stDev</code> defines
the coefficient of variation <code>sigma / mu2</code>.</p></dd>


<dt id="arg-adaptations">adaptations<a class="anchor" aria-label="anchor" href="#arg-adaptations"></a></dt>
<dd><p>A logical vector of length <code>kMax - 1</code> indicating whether or not an adaptation takes
place at interim k, default is <code>rep(TRUE, kMax - 1)</code>.</p></dd>


<dt id="arg-typeofselection">typeOfSelection<a class="anchor" aria-label="anchor" href="#arg-typeofselection"></a></dt>
<dd><p>The way the treatment arms or populations are selected at interim.
Five options are available: <code>"best"</code>, <code>"rbest"</code>, <code>"epsilon"</code>, <code>"all"</code>, and <code>"userDefined"</code>,
default is <code>"best"</code>.<br>
For <code>"rbest"</code> (select the <code>rValue</code> best treatment arms/populations), the parameter <code>rValue</code> has to be specified,
for <code>"epsilon"</code> (select treatment arm/population not worse than epsilon compared to the best), the parameter
<code>epsilonValue</code> has to be specified.
If <code>"userDefined"</code> is selected, <code>"selectArmsFunction"</code> or <code>"selectPopulationsFunction"</code> has to be specified.</p></dd>


<dt id="arg-effectmeasure">effectMeasure<a class="anchor" aria-label="anchor" href="#arg-effectmeasure"></a></dt>
<dd><p>Criterion for treatment arm/population selection, either based on test statistic
(<code>"testStatistic"</code>) or effect estimate (difference for means and rates or ratio for survival) (<code>"effectEstimate"</code>),
default is <code>"effectEstimate"</code>.</p></dd>


<dt id="arg-successcriterion">successCriterion<a class="anchor" aria-label="anchor" href="#arg-successcriterion"></a></dt>
<dd><p>Defines when the study is stopped for efficacy at interim.
Two options are available: <code>"all"</code> stops the trial
if the efficacy criterion is fulfilled for all selected treatment arms/populations,
<code>"atLeastOne"</code> stops if at least one of the selected treatment arms/populations is shown to be
superior to control at interim, default is <code>"all"</code>.</p></dd>


<dt id="arg-epsilonvalue">epsilonValue<a class="anchor" aria-label="anchor" href="#arg-epsilonvalue"></a></dt>
<dd><p>For <code>typeOfSelection = "epsilon"</code> (select treatment arm / population not worse than
epsilon compared to the best), the parameter <code>epsilonValue</code> has to be specified. Must be a numeric of length 1.</p></dd>


<dt id="arg-rvalue">rValue<a class="anchor" aria-label="anchor" href="#arg-rvalue"></a></dt>
<dd><p>For <code>typeOfSelection = "rbest"</code> (select the <code>rValue</code> best treatment arms / populations),
the parameter <code>rValue</code> has to be specified.</p></dd>


<dt id="arg-threshold">threshold<a class="anchor" aria-label="anchor" href="#arg-threshold"></a></dt>
<dd><p>Selection criterion: treatment arm / population is selected only if <code>effectMeasure</code>
exceeds <code>threshold</code>, default is <code>-Inf</code>.
<code>threshold</code> can also be a vector of length <code>activeArms</code> referring to
a separate threshold condition over the treatment arms.</p></dd>


<dt id="arg-plannedsubjects">plannedSubjects<a class="anchor" aria-label="anchor" href="#arg-plannedsubjects"></a></dt>
<dd><p><code>plannedSubjects</code> is a numeric vector of length <code>kMax</code> (the number of stages of the design)
that determines the number of cumulated (overall) subjects when the interim stages are planned.
For two treatment arms, it is the number of subjects for both treatment arms.
For multi-arm designs, <code>plannedSubjects</code> refers to the number of subjects per selected active arm.</p></dd>


<dt id="arg-allocationratioplanned">allocationRatioPlanned<a class="anchor" aria-label="anchor" href="#arg-allocationratioplanned"></a></dt>
<dd><p>The planned allocation ratio <code>n1 / n2</code> for a two treatment groups
design, default is <code>1</code>. For multi-arm designs, it is the allocation ratio relating the active arm(s) to the control.
For simulating means and rates for a two treatment groups design, it can be a vector of length <code>kMax</code>, the number of stages.
It can be a vector of length <code>kMax</code>, too, for multi-arm and enrichment designs.
In these cases, a change of allocating subjects to treatment groups over the stages can be assessed.
Note that internally <code>allocationRatioPlanned</code> is treated as a vector of length <code>kMax</code>, not a scalar.</p></dd>


<dt id="arg-minnumberofsubjectsperstage">minNumberOfSubjectsPerStage<a class="anchor" aria-label="anchor" href="#arg-minnumberofsubjectsperstage"></a></dt>
<dd><p>When performing a data driven sample size recalculation,
the numeric vector <code>minNumberOfSubjectsPerStage</code> with length <code>kMax</code> determines the
minimum number of subjects per stage (i.e., not cumulated), the first element
is not taken into account. For two treatment arms, it is the number of subjects for both treatment arms.
For multi-arm designs <code>minNumberOfSubjectsPerStage</code> refers
to the minimum number of subjects per selected active arm.</p></dd>


<dt id="arg-maxnumberofsubjectsperstage">maxNumberOfSubjectsPerStage<a class="anchor" aria-label="anchor" href="#arg-maxnumberofsubjectsperstage"></a></dt>
<dd><p>When performing a data driven sample size recalculation,
the numeric vector <code>maxNumberOfSubjectsPerStage</code> with length <code>kMax</code> determines the maximum number
of subjects per stage (i.e., not cumulated), the first element is not taken into account.
For two treatment arms, it is the number of subjects for both treatment arms.
For multi-arm designs <code>maxNumberOfSubjectsPerStage</code> refers
to the maximum number of subjects per selected active arm.</p></dd>


<dt id="arg-conditionalpower">conditionalPower<a class="anchor" aria-label="anchor" href="#arg-conditionalpower"></a></dt>
<dd><p>If <code>conditionalPower</code> together with <code>minNumberOfSubjectsPerStage</code> and
<code>maxNumberOfSubjectsPerStage</code> (or <code>minNumberOfEventsPerStage</code> and <code>maxNumberOfEventsPerStage</code>
for survival designs) is specified, a sample size recalculation based on the specified conditional power is performed.
It is defined as the power for the subsequent stage given the current data. By default,
the conditional power will be calculated under the observed effect size. Optionally, you can also specify <code>thetaH1</code> and
<code>stDevH1</code> (for simulating means), <code>pi1H1</code> and <code>pi2H1</code> (for simulating rates), or <code>thetaH1</code> (for simulating
hazard ratios) as parameters under which it is calculated and the sample size recalculation is performed.</p></dd>


<dt id="arg-thetah-">thetaH1<a class="anchor" aria-label="anchor" href="#arg-thetah-"></a></dt>
<dd><p>If specified, the value of the alternative under which
the conditional power or sample size recalculation calculation is performed. Must be a numeric of length 1.</p></dd>


<dt id="arg-stdevh-">stDevH1<a class="anchor" aria-label="anchor" href="#arg-stdevh-"></a></dt>
<dd><p>If specified, the value of the standard deviation under which
the conditional power or sample size recalculation calculation is performed,
default is the value of <code>stDev</code>.</p></dd>


<dt id="arg-maxnumberofiterations">maxNumberOfIterations<a class="anchor" aria-label="anchor" href="#arg-maxnumberofiterations"></a></dt>
<dd><p>The number of simulation iterations, default is <code>1000</code>. Must be a positive integer of length 1.</p></dd>


<dt id="arg-seed">seed<a class="anchor" aria-label="anchor" href="#arg-seed"></a></dt>
<dd><p>The seed to reproduce the simulation, default is a random seed.</p></dd>


<dt id="arg-calcsubjectsfunction">calcSubjectsFunction<a class="anchor" aria-label="anchor" href="#arg-calcsubjectsfunction"></a></dt>
<dd><p>Optionally, a function can be entered that defines the way of performing the sample size
recalculation. By default, sample size recalculation is performed with conditional power and specified
<code>minNumberOfSubjectsPerStage</code> and <code>maxNumberOfSubjectsPerStage</code> (see details and examples).</p></dd>


<dt id="arg-selectarmsfunction">selectArmsFunction<a class="anchor" aria-label="anchor" href="#arg-selectarmsfunction"></a></dt>
<dd><p>Optionally, a function can be entered that defines the way of how treatment arms
are selected. This function is allowed to depend on <code>effectVector</code> with length <code>activeArms</code>,
<code>stage</code>, <code>conditionalPower</code>, <code>conditionalCriticalValue</code>, <code>plannedSubjects/plannedEvents</code>,
<code>allocationRatioPlanned</code>, <code>selectedArms</code>, <code>thetaH1</code> (for means and survival), <code>stDevH1</code> (for means),
<code>overallEffects</code>, and for rates additionally: <code>piTreatmentsH1</code>, <code>piControlH1</code>, <code>overallRates</code>, and
<code>overallRatesControl</code> (see examples).</p></dd>


<dt id="arg-showstatistics">showStatistics<a class="anchor" aria-label="anchor" href="#arg-showstatistics"></a></dt>
<dd><p>Logical. If <code>TRUE</code>, summary statistics of the simulated data
are displayed for the <code>print</code> command, otherwise the output is suppressed, default
is <code>FALSE</code>.</p></dd>

</dl></div>
    <div class="section level2">
    <h2 id="value">Value<a class="anchor" aria-label="anchor" href="#value"></a></h2>
    <p>Returns a <code><a href="SimulationResults.html">SimulationResults</a></code> object.
The following generics (R generic functions) are available for this object:</p><ul><li><p><code><a href="names.FieldSet.html">names()</a></code> to obtain the field names,</p></li>
<li><p><code><a href="print.FieldSet.html">print()</a></code> to print the object,</p></li>
<li><p><code><a href="summary.ParameterSet.html">summary()</a></code> to display a summary of the object,</p></li>
<li><p><code><a href="plot.SimulationResults.html">plot()</a></code> to plot the object,</p></li>
<li><p><code><a href="as.data.frame.ParameterSet.html">as.data.frame()</a></code> to coerce the object to a <code><a href="https://rdrr.io/r/base/data.frame.html" class="external-link">data.frame</a></code>,</p></li>
<li><p><code><a href="as.matrix.FieldSet.html">as.matrix()</a></code> to coerce the object to a <code><a href="https://rdrr.io/r/base/matrix.html" class="external-link">matrix</a></code>.</p></li>
</ul></div>
    <div class="section level2">
    <h2 id="details">Details<a class="anchor" aria-label="anchor" href="#details"></a></h2>
    <p>At given design the function simulates the power, stopping probabilities, selection probabilities,
and expected sample size at given number of subjects, parameter configuration, and treatment arm
selection rule in the multi-arm situation.
An allocation ratio can be specified referring to the ratio of number of subjects in the active
treatment groups as compared to the control group.</p>
<p>The definition of <code>thetaH1</code> and/or <code>stDevH1</code> makes only sense if <code>kMax</code> &gt; 1
and if <code>conditionalPower</code>, <code>minNumberOfSubjectsPerStage</code>, and
<code>maxNumberOfSubjectsPerStage</code> (or <code>calcSubjectsFunction</code>) are defined.</p>
<p><code>calcSubjectsFunction</code><br>
This function returns the number of subjects at given conditional power and conditional
critical value for specified testing situation. The function might depend on the variables
<code>stage</code>,
<code>selectedArms</code>,
<code>plannedSubjects</code>,
<code>allocationRatioPlanned</code>,
<code>minNumberOfSubjectsPerStage</code>,
<code>maxNumberOfSubjectsPerStage</code>,
<code>conditionalPower</code>,
<code>conditionalCriticalValue</code>,
<code>overallEffects</code>, and
<code>stDevH1</code>.
The function has to contain the three-dots argument '...' (see examples).</p>
    </div>
    <div class="section level2">
    <h2 id="how-to-get-help-for-generic-functions">How to get help for generic functions<a class="anchor" aria-label="anchor" href="#how-to-get-help-for-generic-functions"></a></h2>


<p>Click on the link of a generic in the list above to go directly to the help documentation of
the <code>rpact</code> specific implementation of the generic.
Note that you can use the R function <code><a href="https://rdrr.io/r/utils/methods.html" class="external-link">methods</a></code> to get all the methods of a generic and
to identify the object specific name of it, e.g.,
use <code>methods("plot")</code> to get all the methods for the <code>plot</code> generic.
There you can find, e.g., <code>plot.AnalysisResults</code> and
obtain the specific help documentation linked above by typing <code><a href="plot.AnalysisResults.html">?plot.AnalysisResults</a></code>.</p>
    </div>

    <div class="section level2">
    <h2 id="ref-examples">Examples<a class="anchor" aria-label="anchor" href="#ref-examples"></a></h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span class="r-in"><span><span class="kw">if</span> <span class="op">(</span><span class="cn">FALSE</span><span class="op">)</span> <span class="op">{</span> <span class="co"># \dontrun{</span></span></span>
<span class="r-in"><span><span class="co"># Assess a treatment-arm selection strategy with three active arms, </span></span></span>
<span class="r-in"><span><span class="co"># if the better of the arms is selected for the second stage, and </span></span></span>
<span class="r-in"><span><span class="co"># compare it with the no-selection case. </span></span></span>
<span class="r-in"><span><span class="co"># Assume a linear dose-response relationship </span></span></span>
<span class="r-in"><span><span class="va">maxNumberOfIterations</span> <span class="op">&lt;-</span> <span class="fl">100</span></span></span>
<span class="r-in"><span><span class="va">designIN</span> <span class="op">&lt;-</span> <span class="fu"><a href="getDesignInverseNormal.html">getDesignInverseNormal</a></span><span class="op">(</span>typeOfDesign <span class="op">=</span> <span class="st">"OF"</span>, kMax <span class="op">=</span> <span class="fl">2</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="va">sim</span> <span class="op">&lt;-</span> <span class="fu">getSimulationMultiArmMeans</span><span class="op">(</span>design <span class="op">=</span> <span class="va">designIN</span>,</span></span>
<span class="r-in"><span>    activeArms <span class="op">=</span> <span class="fl">3</span>, typeOfShape <span class="op">=</span> <span class="st">"linear"</span>,</span></span>
<span class="r-in"><span>    muMaxVector <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/seq.html" class="external-link">seq</a></span><span class="op">(</span><span class="fl">0</span>,<span class="fl">0.8</span>,<span class="fl">0.2</span><span class="op">)</span>,</span></span>
<span class="r-in"><span>    intersectionTest <span class="op">=</span> <span class="st">"Simes"</span>,</span></span>
<span class="r-in"><span>    typeOfSelection <span class="op">=</span> <span class="st">"best"</span>,</span></span>
<span class="r-in"><span>    plannedSubjects <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">30</span>,<span class="fl">60</span><span class="op">)</span>,</span></span>
<span class="r-in"><span>    maxNumberOfIterations <span class="op">=</span> <span class="va">maxNumberOfIterations</span><span class="op">)</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="va">sim0</span> <span class="op">&lt;-</span> <span class="fu">getSimulationMultiArmMeans</span><span class="op">(</span>design <span class="op">=</span> <span class="va">designIN</span>,</span></span>
<span class="r-in"><span>    activeArms <span class="op">=</span> <span class="fl">3</span>, typeOfShape <span class="op">=</span> <span class="st">"linear"</span>,</span></span>
<span class="r-in"><span>    muMaxVector <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/seq.html" class="external-link">seq</a></span><span class="op">(</span><span class="fl">0</span>,<span class="fl">0.8</span>,<span class="fl">0.2</span><span class="op">)</span>,</span></span>
<span class="r-in"><span>    intersectionTest <span class="op">=</span> <span class="st">"Simes"</span>,</span></span>
<span class="r-in"><span>    typeOfSelection <span class="op">=</span> <span class="st">"all"</span>,</span></span>
<span class="r-in"><span>    plannedSubjects <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">30</span>,<span class="fl">60</span><span class="op">)</span>,</span></span>
<span class="r-in"><span>    maxNumberOfIterations <span class="op">=</span> <span class="va">maxNumberOfIterations</span><span class="op">)</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="va">sim</span><span class="op">$</span><span class="va">rejectAtLeastOne</span></span></span>
<span class="r-in"><span><span class="va">sim</span><span class="op">$</span><span class="va">expectedNumberOfSubjects</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="va">sim0</span><span class="op">$</span><span class="va">rejectAtLeastOne</span></span></span>
<span class="r-in"><span><span class="va">sim0</span><span class="op">$</span><span class="va">expectedNumberOfSubjects</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># Compare the power of the conditional Dunnett test with the power of the </span></span></span>
<span class="r-in"><span><span class="co"># combination test using Dunnett's intersection tests if no treatment arm </span></span></span>
<span class="r-in"><span><span class="co"># selection takes place. Asseume a linear dose-response relationship.</span></span></span>
<span class="r-in"><span><span class="va">maxNumberOfIterations</span> <span class="op">&lt;-</span> <span class="fl">100</span></span></span>
<span class="r-in"><span><span class="va">designIN</span> <span class="op">&lt;-</span> <span class="fu"><a href="getDesignInverseNormal.html">getDesignInverseNormal</a></span><span class="op">(</span>typeOfDesign <span class="op">=</span> <span class="st">"asUser"</span>, </span></span>
<span class="r-in"><span>    userAlphaSpending <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">0</span>, <span class="fl">0.025</span><span class="op">)</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="va">designCD</span> <span class="op">&lt;-</span> <span class="fu"><a href="getDesignConditionalDunnett.html">getDesignConditionalDunnett</a></span><span class="op">(</span>secondStageConditioning <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="va">index</span> <span class="op">&lt;-</span> <span class="fl">1</span></span></span>
<span class="r-in"><span><span class="kw">for</span> <span class="op">(</span><span class="va">design</span> <span class="kw">in</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="va">designIN</span>, <span class="va">designCD</span><span class="op">)</span><span class="op">)</span> <span class="op">{</span></span></span>
<span class="r-in"><span>    <span class="va">results</span> <span class="op">&lt;-</span> <span class="fu">getSimulationMultiArmMeans</span><span class="op">(</span><span class="va">design</span>, activeArms <span class="op">=</span> <span class="fl">3</span>, </span></span>
<span class="r-in"><span>        muMaxVector <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/seq.html" class="external-link">seq</a></span><span class="op">(</span><span class="fl">0</span>, <span class="fl">1</span>, <span class="fl">0.2</span><span class="op">)</span>, typeOfShape <span class="op">=</span> <span class="st">"linear"</span>, </span></span>
<span class="r-in"><span>        plannedSubjects <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/cumsum.html" class="external-link">cumsum</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/rep.html" class="external-link">rep</a></span><span class="op">(</span><span class="fl">20</span>, <span class="fl">2</span><span class="op">)</span><span class="op">)</span>, </span></span>
<span class="r-in"><span>        intersectionTest <span class="op">=</span> <span class="st">"Dunnett"</span>, </span></span>
<span class="r-in"><span>        typeOfSelection <span class="op">=</span> <span class="st">"all"</span>, maxNumberOfIterations <span class="op">=</span> <span class="va">maxNumberOfIterations</span><span class="op">)</span></span></span>
<span class="r-in"><span>    <span class="kw">if</span> <span class="op">(</span><span class="va">index</span> <span class="op">==</span> <span class="fl">1</span><span class="op">)</span> <span class="op">{</span></span></span>
<span class="r-in"><span>        <span class="va">drift</span> <span class="op">&lt;-</span> <span class="va">results</span><span class="op">$</span><span class="va">effectMatrix</span><span class="op">[</span><span class="fu"><a href="https://rdrr.io/r/base/nrow.html" class="external-link">nrow</a></span><span class="op">(</span><span class="va">results</span><span class="op">$</span><span class="va">effectMatrix</span><span class="op">)</span>, <span class="op">]</span></span></span>
<span class="r-in"><span>        <span class="fu"><a href="https://rdrr.io/r/graphics/plot.default.html" class="external-link">plot</a></span><span class="op">(</span><span class="va">drift</span>, <span class="va">results</span><span class="op">$</span><span class="va">rejectAtLeastOne</span>, type <span class="op">=</span> <span class="st">"l"</span>, lty <span class="op">=</span> <span class="fl">1</span>, </span></span>
<span class="r-in"><span>            lwd <span class="op">=</span> <span class="fl">3</span>, col <span class="op">=</span> <span class="st">"black"</span>, ylab <span class="op">=</span> <span class="st">"Power"</span><span class="op">)</span></span></span>
<span class="r-in"><span>    <span class="op">}</span> <span class="kw">else</span> <span class="op">{</span></span></span>
<span class="r-in"><span>        <span class="fu"><a href="https://rdrr.io/r/graphics/lines.html" class="external-link">lines</a></span><span class="op">(</span><span class="va">drift</span>,<span class="va">results</span><span class="op">$</span><span class="va">rejectAtLeastOne</span>, type <span class="op">=</span> <span class="st">"l"</span>, </span></span>
<span class="r-in"><span>            lty <span class="op">=</span> <span class="va">index</span>, lwd <span class="op">=</span> <span class="fl">3</span>, col <span class="op">=</span> <span class="st">"red"</span><span class="op">)</span></span></span>
<span class="r-in"><span>    <span class="op">}</span></span></span>
<span class="r-in"><span>    <span class="va">index</span> <span class="op">&lt;-</span> <span class="va">index</span> <span class="op">+</span> <span class="fl">1</span></span></span>
<span class="r-in"><span><span class="op">}</span></span></span>
<span class="r-in"><span><span class="fu"><a href="https://rdrr.io/r/graphics/legend.html" class="external-link">legend</a></span><span class="op">(</span><span class="st">"topleft"</span>, legend<span class="op">=</span><span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"Combination Dunnett"</span>, <span class="st">"Conditional Dunnett"</span><span class="op">)</span>,</span></span>
<span class="r-in"><span>    col<span class="op">=</span><span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"black"</span>, <span class="st">"red"</span><span class="op">)</span>, lty <span class="op">=</span> <span class="op">(</span><span class="fl">1</span><span class="op">:</span><span class="fl">2</span><span class="op">)</span>, cex <span class="op">=</span> <span class="fl">0.8</span><span class="op">)</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># Assess the design characteristics of a user defined selection</span></span></span>
<span class="r-in"><span><span class="co"># strategy in a two-stage design using the inverse normal method</span></span></span>
<span class="r-in"><span><span class="co"># with constant bounds. Stopping for futility due to</span></span></span>
<span class="r-in"><span><span class="co"># de-selection of all treatment arms.</span></span></span>
<span class="r-in"><span><span class="va">designIN</span> <span class="op">&lt;-</span> <span class="fu"><a href="getDesignInverseNormal.html">getDesignInverseNormal</a></span><span class="op">(</span>typeOfDesign <span class="op">=</span> <span class="st">"P"</span>, kMax <span class="op">=</span> <span class="fl">2</span><span class="op">)</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="va">mySelection</span> <span class="op">&lt;-</span> <span class="kw">function</span><span class="op">(</span><span class="va">effectVector</span><span class="op">)</span> <span class="op">{</span></span></span>
<span class="r-in"><span>    <span class="va">selectedArms</span> <span class="op">&lt;-</span> <span class="op">(</span><span class="va">effectVector</span> <span class="op">&gt;=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">0</span>, <span class="fl">0.1</span>, <span class="fl">0.3</span><span class="op">)</span><span class="op">)</span></span></span>
<span class="r-in"><span>    <span class="kw"><a href="https://rdrr.io/r/base/function.html" class="external-link">return</a></span><span class="op">(</span><span class="va">selectedArms</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="op">}</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="va">results</span> <span class="op">&lt;-</span> <span class="fu">getSimulationMultiArmMeans</span><span class="op">(</span><span class="va">designIN</span>, activeArms <span class="op">=</span> <span class="fl">3</span>, </span></span>
<span class="r-in"><span>    muMaxVector <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/seq.html" class="external-link">seq</a></span><span class="op">(</span><span class="fl">0</span>, <span class="fl">1</span>, <span class="fl">0.2</span><span class="op">)</span>, </span></span>
<span class="r-in"><span>    typeOfShape <span class="op">=</span> <span class="st">"linear"</span>, </span></span>
<span class="r-in"><span>    plannedSubjects <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">30</span>,<span class="fl">60</span><span class="op">)</span>, </span></span>
<span class="r-in"><span>    intersectionTest <span class="op">=</span> <span class="st">"Dunnett"</span>, </span></span>
<span class="r-in"><span>    typeOfSelection <span class="op">=</span> <span class="st">"userDefined"</span>,</span></span>
<span class="r-in"><span>    selectArmsFunction <span class="op">=</span> <span class="va">mySelection</span>,</span></span>
<span class="r-in"><span>    maxNumberOfIterations <span class="op">=</span> <span class="fl">100</span><span class="op">)</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="fu"><a href="https://rdrr.io/r/base/options.html" class="external-link">options</a></span><span class="op">(</span>rpact.summary.output.size <span class="op">=</span> <span class="st">"medium"</span><span class="op">)</span>         </span></span>
<span class="r-in"><span><span class="fu"><a href="https://rdrr.io/r/base/summary.html" class="external-link">summary</a></span><span class="op">(</span><span class="va">results</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="kw">if</span> <span class="op">(</span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">require</a></span><span class="op">(</span><span class="va"><a href="https://ggplot2.tidyverse.org" class="external-link">ggplot2</a></span><span class="op">)</span><span class="op">)</span> <span class="fu"><a href="https://rdrr.io/r/graphics/plot.default.html" class="external-link">plot</a></span><span class="op">(</span><span class="va">results</span>, type <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">5</span>,<span class="fl">3</span>,<span class="fl">9</span><span class="op">)</span>, grid <span class="op">=</span> <span class="fl">4</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="op">}</span> <span class="co"># }</span></span></span>
<span class="r-in"><span></span></span>
</code></pre></div>
    </div>
  </main><aside class="col-md-3"><nav id="toc" aria-label="Table of contents"><h2>On this page</h2>
    </nav></aside></div>


    <footer><div class="pkgdown-footer-left">
  <p>Developed by Gernot Wassmer, Friedrich Pahlke.</p>
</div>

<div class="pkgdown-footer-right">
  <p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.1.1.</p>
</div>

    </footer></div>





  </body></html>

