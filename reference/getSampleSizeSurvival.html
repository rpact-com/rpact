<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><title>Get Sample Size Survival — getSampleSizeSurvival • rpact</title><script src="../deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><link href="../deps/bootstrap-5.3.1/bootstrap.min.css" rel="stylesheet"><script src="../deps/bootstrap-5.3.1/bootstrap.bundle.min.js"></script><link href="../deps/font-awesome-6.4.2/css/all.min.css" rel="stylesheet"><link href="../deps/font-awesome-6.4.2/css/v4-shims.min.css" rel="stylesheet"><script src="../deps/headroom-0.11.0/headroom.min.js"></script><script src="../deps/headroom-0.11.0/jQuery.headroom.min.js"></script><script src="../deps/bootstrap-toc-1.0.1/bootstrap-toc.min.js"></script><script src="../deps/clipboard.js-2.0.11/clipboard.min.js"></script><script src="../deps/search-1.0.0/autocomplete.jquery.min.js"></script><script src="../deps/search-1.0.0/fuse.min.js"></script><script src="../deps/search-1.0.0/mark.min.js"></script><!-- pkgdown --><script src="../pkgdown.js"></script><meta property="og:title" content="Get Sample Size Survival — getSampleSizeSurvival"><meta name="description" content="Returns the sample size for testing the hazard ratio in a two treatment groups survival design."><meta property="og:description" content="Returns the sample size for testing the hazard ratio in a two treatment groups survival design."><meta property="og:image" content="https://rpact-com.github.io/rpact/logo.png"></head><body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>


    <nav class="navbar navbar-expand-lg fixed-top bg-light" data-bs-theme="light" aria-label="Site navigation"><div class="container">

    <a class="navbar-brand me-2" href="../index.html">rpact</a>

    <small class="nav-text text-muted me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="">4.0.1.9262</small>


    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto"><li class="active nav-item"><a class="nav-link" href="../reference/index.html">Reference</a></li>
<li class="nav-item dropdown">
  <button class="nav-link dropdown-toggle" type="button" id="dropdown-articles" data-bs-toggle="dropdown" aria-expanded="false" aria-haspopup="true">Articles</button>
  <ul class="dropdown-menu" aria-labelledby="dropdown-articles"><li><a class="dropdown-item" href="../articles/rpact_getting_started.html">Getting started with rpact</a></li>
  </ul></li>
<li class="nav-item"><a class="nav-link" href="../news/index.html">Changelog</a></li>
      </ul><ul class="navbar-nav"><li class="nav-item"><form class="form-inline" role="search">
 <input class="form-control" type="search" name="search-input" id="search-input" autocomplete="off" aria-label="Search site" placeholder="Search for" data-search-index="../search.json"></form></li>
<li class="nav-item"><a class="external-link nav-link" href="https://github.com/rpact-com/rpact/" aria-label="GitHub"><span class="fa fab fa-github fa-lg"></span></a></li>
      </ul></div>


  </div>
</nav><div class="container template-reference-topic">
<div class="row">
  <main id="main" class="col-md-9"><div class="page-header">
      <img src="../logo.png" class="logo" alt=""><h1>Get Sample Size Survival</h1>
      <small class="dont-index">Source: <a href="https://github.com/rpact-com/rpact/blob/main/R/f_design_plan_survival.R" class="external-link"><code>R/f_design_plan_survival.R</code></a></small>
      <div class="d-none name"><code>getSampleSizeSurvival.Rd</code></div>
    </div>

    <div class="ref-description section level2">
    <p>Returns the sample size for testing the hazard ratio in a two treatment groups survival design.</p>
    </div>

    <div class="section level2">
    <h2 id="ref-usage">Usage<a class="anchor" aria-label="anchor" href="#ref-usage"></a></h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span><span class="fu">getSampleSizeSurvival</span><span class="op">(</span></span>
<span>  design <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  <span class="va">...</span>,</span>
<span>  typeOfComputation <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"Schoenfeld"</span>, <span class="st">"Freedman"</span>, <span class="st">"HsiehFreedman"</span><span class="op">)</span>,</span>
<span>  thetaH0 <span class="op">=</span> <span class="fl">1</span>,</span>
<span>  pi1 <span class="op">=</span> <span class="cn">NA_real_</span>,</span>
<span>  pi2 <span class="op">=</span> <span class="cn">NA_real_</span>,</span>
<span>  lambda1 <span class="op">=</span> <span class="cn">NA_real_</span>,</span>
<span>  lambda2 <span class="op">=</span> <span class="cn">NA_real_</span>,</span>
<span>  median1 <span class="op">=</span> <span class="cn">NA_real_</span>,</span>
<span>  median2 <span class="op">=</span> <span class="cn">NA_real_</span>,</span>
<span>  kappa <span class="op">=</span> <span class="fl">1</span>,</span>
<span>  hazardRatio <span class="op">=</span> <span class="cn">NA_real_</span>,</span>
<span>  piecewiseSurvivalTime <span class="op">=</span> <span class="cn">NA_real_</span>,</span>
<span>  allocationRatioPlanned <span class="op">=</span> <span class="cn">NA_real_</span>,</span>
<span>  eventTime <span class="op">=</span> <span class="fl">12</span>,</span>
<span>  accrualTime <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">0</span>, <span class="fl">12</span><span class="op">)</span>,</span>
<span>  accrualIntensity <span class="op">=</span> <span class="fl">0.1</span>,</span>
<span>  accrualIntensityType <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"auto"</span>, <span class="st">"absolute"</span>, <span class="st">"relative"</span><span class="op">)</span>,</span>
<span>  followUpTime <span class="op">=</span> <span class="cn">NA_real_</span>,</span>
<span>  maxNumberOfSubjects <span class="op">=</span> <span class="cn">NA_real_</span>,</span>
<span>  dropoutRate1 <span class="op">=</span> <span class="fl">0</span>,</span>
<span>  dropoutRate2 <span class="op">=</span> <span class="fl">0</span>,</span>
<span>  dropoutTime <span class="op">=</span> <span class="fl">12</span></span>
<span><span class="op">)</span></span></code></pre></div>
    </div>

    <div class="section level2">
    <h2 id="arguments">Arguments<a class="anchor" aria-label="anchor" href="#arguments"></a></h2>


<dl><dt id="arg-design">design<a class="anchor" aria-label="anchor" href="#arg-design"></a></dt>
<dd><p>The trial design. If no trial design is specified, a fixed sample size design is used.
In this case, Type I error rate <code>alpha</code>, Type II error rate <code>beta</code>, <code>twoSidedPower</code>,
and <code>sided</code> can be directly entered as argument where necessary.</p></dd>


<dt id="arg--">...<a class="anchor" aria-label="anchor" href="#arg--"></a></dt>
<dd><p>Ensures that all arguments (starting from the "...") are to be named and
that a warning will be displayed if unknown arguments are passed.</p></dd>


<dt id="arg-typeofcomputation">typeOfComputation<a class="anchor" aria-label="anchor" href="#arg-typeofcomputation"></a></dt>
<dd><p>Three options are available: <code>"Schoenfeld"</code>, <code>"Freedman"</code>, <code>"HsiehFreedman"</code>,
the default is <code>"Schoenfeld"</code>. For details, see Hsieh (Statistics in Medicine, 1992).
For non-inferiority testing (i.e., <code>thetaH0 != 1</code>), only Schoenfeld's formula can be used.</p></dd>


<dt id="arg-thetah-">thetaH0<a class="anchor" aria-label="anchor" href="#arg-thetah-"></a></dt>
<dd><p>The null hypothesis value,
default is <code>0</code> for the normal and the binary case (testing means and rates, respectively),
it is <code>1</code> for the survival case (testing the hazard ratio).<br><br>
For non-inferiority designs, <code>thetaH0</code> is the non-inferiority bound.
That is, in case of (one-sided) testing of</p><ul><li><p><em>means</em>: a value <code>!= 0</code>
(or a value <code>!= 1</code> for testing the mean ratio) can be specified.</p></li>
<li><p><em>rates</em>: a value <code>!= 0</code>
(or a value <code>!= 1</code> for testing the risk ratio <code>pi1 / pi2</code>) can be specified.</p></li>
<li><p><em>survival data</em>: a bound for testing H0: <code>hazard ratio = thetaH0 != 1</code> can be specified.</p></li>
<li><p><em>count data</em>: a bound for testing H0: <code>lambda1 / lambda2 = thetaH0 != 1</code> can be specified.</p></li>
</ul><p>For testing a rate in one sample, a value <code>thetaH0</code> in (0, 1) has to be specified for
defining the null hypothesis H0: <code>pi = thetaH0</code>.</p></dd>


<dt id="arg-pi-">pi1<a class="anchor" aria-label="anchor" href="#arg-pi-"></a></dt>
<dd><p>A numeric value or vector that represents the assumed event rate in the treatment group,
default is <code>seq(0.2, 0.5, 0.1)</code> (power calculations and simulations) or
<code>seq(0.4, 0.6, 0.1)</code> (sample size calculations).</p></dd>


<dt id="arg-pi-">pi2<a class="anchor" aria-label="anchor" href="#arg-pi-"></a></dt>
<dd><p>A numeric value that represents the assumed event rate in the control group, default is <code>0.2</code>.</p></dd>


<dt id="arg-lambda-">lambda1<a class="anchor" aria-label="anchor" href="#arg-lambda-"></a></dt>
<dd><p>The assumed hazard rate in the treatment group, there is no default.
<code>lambda1</code> can also be used to define piecewise exponentially distributed survival times (see details). Must be a positive numeric of length 1.</p></dd>


<dt id="arg-lambda-">lambda2<a class="anchor" aria-label="anchor" href="#arg-lambda-"></a></dt>
<dd><p>The assumed hazard rate in the reference group, there is no default.
<code>lambda2</code> can also be used to define piecewise exponentially distributed survival times (see details). Must be a positive numeric of length 1.</p></dd>


<dt id="arg-median-">median1<a class="anchor" aria-label="anchor" href="#arg-median-"></a></dt>
<dd><p>The assumed median survival time in the treatment group, there is no default.</p></dd>


<dt id="arg-median-">median2<a class="anchor" aria-label="anchor" href="#arg-median-"></a></dt>
<dd><p>The assumed median survival time in the reference group, there is no default. Must be a positive numeric of length 1.</p></dd>


<dt id="arg-kappa">kappa<a class="anchor" aria-label="anchor" href="#arg-kappa"></a></dt>
<dd><p>A numeric value &gt; 0. A <code>kappa != 1</code> will be used for the specification
of the shape of the Weibull distribution.
Default is <code>1</code>, i.e., the exponential survival distribution is used instead of the Weibull distribution.
Note that the Weibull distribution cannot be used for the piecewise definition of
the survival time distribution, i.e., only <code>piecewiselambda</code> (as a single value) and <code>kappa</code>
can be specified.
This function is equivalent to <code>pweibull(t, shape = kappa, scale = 1 / lambda)</code>
of the <code>stats</code> package, i.e., the scale parameter is <code>1 / 'hazard rate'</code>.<br>
For example,
<code>getPiecewiseExponentialDistribution(time = 130, piecewiseLambda = 0.01, kappa = 4.2)</code>
and <code>pweibull(q = 130, shape = 4.2, scale = 1 / 0.01)</code> provide the sample result.</p></dd>


<dt id="arg-hazardratio">hazardRatio<a class="anchor" aria-label="anchor" href="#arg-hazardratio"></a></dt>
<dd><p>The vector of hazard ratios under consideration.
If the event or hazard rates in both treatment groups are defined, the hazard ratio needs
not to be specified as it is calculated, there is no default. Must be a positive numeric of length 1.</p></dd>


<dt id="arg-piecewisesurvivaltime">piecewiseSurvivalTime<a class="anchor" aria-label="anchor" href="#arg-piecewisesurvivaltime"></a></dt>
<dd><p>A vector that specifies the time intervals for the piecewise
definition of the exponential survival time cumulative distribution function <br>
(for details see <code><a href="getPiecewiseSurvivalTime.html">getPiecewiseSurvivalTime()</a></code>).</p></dd>


<dt id="arg-allocationratioplanned">allocationRatioPlanned<a class="anchor" aria-label="anchor" href="#arg-allocationratioplanned"></a></dt>
<dd><p>The planned allocation ratio <code>n1 / n2</code> for a two treatment groups
design, default is <code>1</code>. If <code>allocationRatioPlanned = 0</code> is entered,
the optimal allocation ratio yielding the smallest overall sample size is determined.</p></dd>


<dt id="arg-eventtime">eventTime<a class="anchor" aria-label="anchor" href="#arg-eventtime"></a></dt>
<dd><p>The assumed time under which the event rates are calculated, default is <code>12</code>.</p></dd>


<dt id="arg-accrualtime">accrualTime<a class="anchor" aria-label="anchor" href="#arg-accrualtime"></a></dt>
<dd><p>The assumed accrual time intervals for the study, default is
<code>c(0, 12)</code> (for details see <code><a href="getAccrualTime.html">getAccrualTime()</a></code>).</p></dd>


<dt id="arg-accrualintensity">accrualIntensity<a class="anchor" aria-label="anchor" href="#arg-accrualintensity"></a></dt>
<dd><p>A numeric vector of accrual intensities, default is the relative
intensity <code>0.1</code> (for details see <code><a href="getAccrualTime.html">getAccrualTime()</a></code>).</p></dd>


<dt id="arg-accrualintensitytype">accrualIntensityType<a class="anchor" aria-label="anchor" href="#arg-accrualintensitytype"></a></dt>
<dd><p>A character value specifying the accrual intensity input type.
Must be one of <code>"auto"</code>, <code>"absolute"</code>, or <code>"relative"</code>; default is <code>"auto"</code>,
i.e., if all values are &lt; 1 the type is <code>"relative"</code>, otherwise it is <code>"absolute"</code>.</p></dd>


<dt id="arg-followuptime">followUpTime<a class="anchor" aria-label="anchor" href="#arg-followuptime"></a></dt>
<dd><p>The assumed (additional) follow-up time for the study, default is <code>6</code>.
The total study duration is <code>accrualTime + followUpTime</code>.</p></dd>


<dt id="arg-maxnumberofsubjects">maxNumberOfSubjects<a class="anchor" aria-label="anchor" href="#arg-maxnumberofsubjects"></a></dt>
<dd><p>If <code>maxNumberOfSubjects &gt; 0</code> is specified,
the follow-up time for the required number of events is determined.</p></dd>


<dt id="arg-dropoutrate-">dropoutRate1<a class="anchor" aria-label="anchor" href="#arg-dropoutrate-"></a></dt>
<dd><p>The assumed drop-out rate in the treatment group, default is <code>0</code>.</p></dd>


<dt id="arg-dropoutrate-">dropoutRate2<a class="anchor" aria-label="anchor" href="#arg-dropoutrate-"></a></dt>
<dd><p>The assumed drop-out rate in the control group, default is <code>0</code>.</p></dd>


<dt id="arg-dropouttime">dropoutTime<a class="anchor" aria-label="anchor" href="#arg-dropouttime"></a></dt>
<dd><p>The assumed time for drop-out rates in the control and the
treatment group, default is <code>12</code>.</p></dd>

</dl></div>
    <div class="section level2">
    <h2 id="value">Value<a class="anchor" aria-label="anchor" href="#value"></a></h2>
    <p>Returns a <code><a href="TrialDesignPlan.html">TrialDesignPlan</a></code> object.
The following generics (R generic functions) are available for this result object:</p><ul><li><p><code><a href="names.FieldSet.html">names()</a></code> to obtain the field names,</p></li>
<li><p><code><a href="print.FieldSet.html">print()</a></code> to print the object,</p></li>
<li><p><code><a href="summary.TrialDesignSet.html">summary()</a></code> to display a summary of the object,</p></li>
<li><p><code><a href="plot.TrialDesignPlan.html">plot()</a></code> to plot the object,</p></li>
<li><p><code><a href="as.data.frame.TrialDesignPlan.html">as.data.frame()</a></code> to coerce the object to a <code><a href="https://rdrr.io/r/base/data.frame.html" class="external-link">data.frame</a></code>,</p></li>
<li><p><code><a href="as.matrix.FieldSet.html">as.matrix()</a></code> to coerce the object to a <code><a href="https://rdrr.io/r/base/matrix.html" class="external-link">matrix</a></code>.</p></li>
</ul></div>
    <div class="section level2">
    <h2 id="details">Details<a class="anchor" aria-label="anchor" href="#details"></a></h2>
    <p>At given design the function calculates the number of events and an estimate for the
necessary number of subjects for testing the hazard ratio in a survival design.
It also calculates the time when the required events are expected under the given
assumptions (exponentially, piecewise exponentially, or Weibull distributed survival times
and constant or non-constant piecewise accrual).
Additionally, an allocation ratio = <code>n1 / n2</code> can be specified where <code>n1</code> and <code>n2</code> are the number
of subjects in the two treatment groups.</p>
<p>Optional argument <code>accountForObservationTimes</code>: if <code>accountForObservationTimes = TRUE</code>, the number of
subjects is calculated assuming specific accrual and follow-up time, default is <code>TRUE</code>.</p>
<p>The formula of Kim &amp; Tsiatis (Biometrics, 1990)
is used to calculate the expected number of events under the alternative
(see also Lakatos &amp; Lan, Statistics in Medicine, 1992). These formulas are generalized
to piecewise survival times and non-constant piecewise accrual over time.<br></p>
<p>Optional argument <code>accountForObservationTimes</code>: if <code>accountForObservationTimes = FALSE</code>,
only the event rates are used for the calculation of the maximum number of subjects.</p>
    </div>
    <div class="section level2">
    <h2 id="piecewise-survival-time">Piecewise survival time<a class="anchor" aria-label="anchor" href="#piecewise-survival-time"></a></h2>


<p>The first element of the vector <code>piecewiseSurvivalTime</code> must be equal to <code>0</code>.
<code>piecewiseSurvivalTime</code> can also be a list that combines the definition of the
time intervals and hazard rates in the reference group.
The definition of the survival time in the treatment group is obtained by the specification
of the hazard ratio (see examples for details).</p>
    </div>
    <div class="section level2">
    <h2 id="staggered-patient-entry">Staggered patient entry<a class="anchor" aria-label="anchor" href="#staggered-patient-entry"></a></h2>


<p><code>accrualTime</code> is the time period of subjects' accrual in a study.
It can be a value that defines the end of accrual or a vector.
In this case, <code>accrualTime</code> can be used to define a non-constant accrual over time.
For this, <code>accrualTime</code> is a vector that defines the accrual intervals.
The first element of <code>accrualTime</code> must be equal to <code>0</code> and, additionally,
<code>accrualIntensity</code> needs to be specified.
<code>accrualIntensity</code> itself is a value or a vector (depending on the
length of <code>accrualTime</code>) that defines the intensity how subjects
enter the trial in the intervals defined through <code>accrualTime</code>.</p>
<p><code>accrualTime</code> can also be a list that combines the definition of the accrual time and
accrual intensity (see below and examples for details).</p>
<p>If the length of <code>accrualTime</code> and the length of <code>accrualIntensity</code> are the same
(i.e., the end of accrual is undefined), <code>maxNumberOfSubjects &gt; 0</code> needs to be specified
and the end of accrual is calculated.
In that case, <code>accrualIntensity</code> is the number of subjects per time unit, i.e., the absolute accrual intensity.</p>
<p>If the length of <code>accrualTime</code> equals the length of <code>accrualIntensity - 1</code>
(i.e., the end of accrual is defined), <code>maxNumberOfSubjects</code> is calculated if the absolute accrual intensity is given.
If all elements in <code>accrualIntensity</code> are smaller than 1, <code>accrualIntensity</code> defines
the <em>relative</em> intensity how subjects enter the trial.
For example, <code>accrualIntensity = c(0.1, 0.2)</code> specifies that in the second accrual interval
the intensity is doubled as compared to the first accrual interval. The actual (absolute) accrual intensity
is calculated for the calculated or given <code>maxNumberOfSubjects</code>.
Note that the default is <code>accrualIntensity = 0.1</code> meaning that the <em>absolute</em> accrual intensity
will be calculated.</p>
    </div>
    <div class="section level2">
    <h2 id="how-to-get-help-for-generic-functions">How to get help for generic functions<a class="anchor" aria-label="anchor" href="#how-to-get-help-for-generic-functions"></a></h2>


<p>Click on the link of a generic in the list above to go directly to the help documentation of
the <code>rpact</code> specific implementation of the generic.
Note that you can use the R function <code><a href="https://rdrr.io/r/utils/methods.html" class="external-link">methods</a></code> to get all the methods of a generic and
to identify the object specific name of it, e.g.,
use <code>methods("plot")</code> to get all the methods for the <code>plot</code> generic.
There you can find, e.g., <code>plot.AnalysisResults</code> and
obtain the specific help documentation linked above by typing <code><a href="plot.AnalysisResults.html">?plot.AnalysisResults</a></code>.</p>
    </div>
    <div class="section level2">
    <h2 id="see-also">See also<a class="anchor" aria-label="anchor" href="#see-also"></a></h2>
    <div class="dont-index"><p>Other sample size functions:
<code><a href="getSampleSizeCounts.html">getSampleSizeCounts</a>()</code>,
<code><a href="getSampleSizeMeans.html">getSampleSizeMeans</a>()</code>,
<code><a href="getSampleSizeRates.html">getSampleSizeRates</a>()</code></p></div>
    </div>

    <div class="section level2">
    <h2 id="ref-examples">Examples<a class="anchor" aria-label="anchor" href="#ref-examples"></a></h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span class="r-in"><span><span class="kw">if</span> <span class="op">(</span><span class="cn">FALSE</span><span class="op">)</span> <span class="op">{</span> <span class="co"># \dontrun{</span></span></span>
<span class="r-in"><span><span class="co"># Fixed sample size trial with median survival 20 vs. 30 months in treatment and </span></span></span>
<span class="r-in"><span><span class="co"># reference group, respectively, alpha = 0.05 (two-sided), and power 1 - beta = 90%.</span></span></span>
<span class="r-in"><span><span class="co"># 20 subjects will be recruited per month up to 400 subjects, i.e., accrual time </span></span></span>
<span class="r-in"><span><span class="co"># is 20 months.  </span></span></span>
<span class="r-in"><span><span class="fu">getSampleSizeSurvival</span><span class="op">(</span>alpha <span class="op">=</span> <span class="fl">0.05</span>, sided <span class="op">=</span> <span class="fl">2</span>, beta <span class="op">=</span> <span class="fl">0.1</span>, lambda1 <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/Log.html" class="external-link">log</a></span><span class="op">(</span><span class="fl">2</span><span class="op">)</span> <span class="op">/</span> <span class="fl">20</span>, </span></span>
<span class="r-in"><span>    lambda2 <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/Log.html" class="external-link">log</a></span><span class="op">(</span><span class="fl">2</span><span class="op">)</span> <span class="op">/</span> <span class="fl">30</span>, accrualTime <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">0</span>,<span class="fl">20</span><span class="op">)</span>, accrualIntensity <span class="op">=</span> <span class="fl">20</span><span class="op">)</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># Fixed sample size with minimum required definitions, pi1 = c(0.4,0.5,0.6) and </span></span></span>
<span class="r-in"><span><span class="co"># pi2 = 0.2 at event time 12, accrual time 12 and follow-up time 6 as default, </span></span></span>
<span class="r-in"><span><span class="co"># only alpha = 0.01 is specified  </span></span></span>
<span class="r-in"><span><span class="fu">getSampleSizeSurvival</span><span class="op">(</span>alpha <span class="op">=</span> <span class="fl">0.01</span><span class="op">)</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># Four stage O'Brien &amp; Fleming group sequential design with minimum required </span></span></span>
<span class="r-in"><span><span class="co"># definitions, pi1 = c(0.4,0.5,0.6) and pi2 = 0.2 at event time 12, </span></span></span>
<span class="r-in"><span><span class="co"># accrual time 12 and follow-up time 6 as default  </span></span></span>
<span class="r-in"><span><span class="fu">getSampleSizeSurvival</span><span class="op">(</span>design <span class="op">=</span> <span class="fu"><a href="getDesignGroupSequential.html">getDesignGroupSequential</a></span><span class="op">(</span>kMax <span class="op">=</span> <span class="fl">4</span><span class="op">)</span><span class="op">)</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># For fixed sample design, determine necessary accrual time if 200 subjects and </span></span></span>
<span class="r-in"><span><span class="co"># 30 subjects per time unit can be recruited </span></span></span>
<span class="r-in"><span><span class="fu">getSampleSizeSurvival</span><span class="op">(</span>accrualTime <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">0</span><span class="op">)</span>, accrualIntensity <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">30</span><span class="op">)</span>, </span></span>
<span class="r-in"><span>    maxNumberOfSubjects <span class="op">=</span> <span class="fl">200</span><span class="op">)</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># Determine necessary accrual time if 200 subjects and if the first 6 time units </span></span></span>
<span class="r-in"><span><span class="co"># 20 subjects per time unit can be recruited, then 30 subjects per time unit </span></span></span>
<span class="r-in"><span><span class="fu">getSampleSizeSurvival</span><span class="op">(</span>accrualTime <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">0</span>, <span class="fl">6</span><span class="op">)</span>, accrualIntensity <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">20</span>, <span class="fl">30</span><span class="op">)</span>, </span></span>
<span class="r-in"><span>    maxNumberOfSubjects <span class="op">=</span> <span class="fl">200</span><span class="op">)</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># Determine maximum number of Subjects if the first 6 time units 20 subjects </span></span></span>
<span class="r-in"><span><span class="co"># per time unit can be recruited, and after 10 time units 30 subjects per time unit</span></span></span>
<span class="r-in"><span><span class="fu">getSampleSizeSurvival</span><span class="op">(</span>accrualTime <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">0</span>, <span class="fl">6</span>, <span class="fl">10</span><span class="op">)</span>, accrualIntensity <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">20</span>, <span class="fl">30</span><span class="op">)</span><span class="op">)</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># Specify accrual time as a list</span></span></span>
<span class="r-in"><span><span class="va">at</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span></span></span>
<span class="r-in"><span>    <span class="st">"0 - &lt;6"</span>  <span class="op">=</span> <span class="fl">20</span>,</span></span>
<span class="r-in"><span>    <span class="st">"6 - Inf"</span> <span class="op">=</span> <span class="fl">30</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="fu">getSampleSizeSurvival</span><span class="op">(</span>accrualTime <span class="op">=</span> <span class="va">at</span>, maxNumberOfSubjects <span class="op">=</span> <span class="fl">200</span><span class="op">)</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># Specify accrual time as a list, if maximum number of subjects need to be calculated</span></span></span>
<span class="r-in"><span><span class="va">at</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span></span></span>
<span class="r-in"><span>    <span class="st">"0 - &lt;6"</span>   <span class="op">=</span> <span class="fl">20</span>,</span></span>
<span class="r-in"><span>    <span class="st">"6 - &lt;=10"</span> <span class="op">=</span> <span class="fl">30</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="fu">getSampleSizeSurvival</span><span class="op">(</span>accrualTime <span class="op">=</span> <span class="va">at</span><span class="op">)</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># Specify effect size for a two-stage group design with O'Brien &amp; Fleming boundaries</span></span></span>
<span class="r-in"><span><span class="co"># Effect size is based on event rates at specified event time </span></span></span>
<span class="r-in"><span><span class="co"># needs to be specified because it should be shown that hazard ratio &lt; 1</span></span></span>
<span class="r-in"><span><span class="fu">getSampleSizeSurvival</span><span class="op">(</span>design <span class="op">=</span> <span class="fu"><a href="getDesignGroupSequential.html">getDesignGroupSequential</a></span><span class="op">(</span>kMax <span class="op">=</span> <span class="fl">2</span><span class="op">)</span>, </span></span>
<span class="r-in"><span>    pi1 <span class="op">=</span> <span class="fl">0.2</span>, pi2 <span class="op">=</span> <span class="fl">0.3</span>, eventTime <span class="op">=</span> <span class="fl">24</span><span class="op">)</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># Effect size is based on event rate at specified event </span></span></span>
<span class="r-in"><span><span class="co"># time for the reference group and hazard ratio </span></span></span>
<span class="r-in"><span><span class="fu">getSampleSizeSurvival</span><span class="op">(</span>design <span class="op">=</span> <span class="fu"><a href="getDesignGroupSequential.html">getDesignGroupSequential</a></span><span class="op">(</span>kMax <span class="op">=</span> <span class="fl">2</span><span class="op">)</span>, </span></span>
<span class="r-in"><span>    hazardRatio <span class="op">=</span> <span class="fl">0.5</span>, pi2 <span class="op">=</span> <span class="fl">0.3</span>, eventTime <span class="op">=</span> <span class="fl">24</span><span class="op">)</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># Effect size is based on hazard rate for the reference group and hazard ratio</span></span></span>
<span class="r-in"><span><span class="fu">getSampleSizeSurvival</span><span class="op">(</span>design <span class="op">=</span> <span class="fu"><a href="getDesignGroupSequential.html">getDesignGroupSequential</a></span><span class="op">(</span>kMax <span class="op">=</span> <span class="fl">2</span><span class="op">)</span>, </span></span>
<span class="r-in"><span>    hazardRatio <span class="op">=</span> <span class="fl">0.5</span>, lambda2 <span class="op">=</span> <span class="fl">0.02</span><span class="op">)</span> </span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># Specification of piecewise exponential survival time and hazard ratios  </span></span></span>
<span class="r-in"><span><span class="fu">getSampleSizeSurvival</span><span class="op">(</span>design <span class="op">=</span> <span class="fu"><a href="getDesignGroupSequential.html">getDesignGroupSequential</a></span><span class="op">(</span>kMax <span class="op">=</span> <span class="fl">2</span><span class="op">)</span>, </span></span>
<span class="r-in"><span>    piecewiseSurvivalTime <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">0</span>, <span class="fl">5</span>, <span class="fl">10</span><span class="op">)</span>, lambda2 <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">0.01</span>, <span class="fl">0.02</span>, <span class="fl">0.04</span><span class="op">)</span>, </span></span>
<span class="r-in"><span>    hazardRatio <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">1.5</span>, <span class="fl">1.8</span>, <span class="fl">2</span><span class="op">)</span><span class="op">)</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># Specification of piecewise exponential survival time as a list and hazard ratios </span></span></span>
<span class="r-in"><span><span class="va">pws</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span></span></span>
<span class="r-in"><span>    <span class="st">"0 - &lt;5"</span>  <span class="op">=</span> <span class="fl">0.01</span>,</span></span>
<span class="r-in"><span>    <span class="st">"5 - &lt;10"</span> <span class="op">=</span> <span class="fl">0.02</span>,</span></span>
<span class="r-in"><span>    <span class="st">"&gt;=10"</span>    <span class="op">=</span> <span class="fl">0.04</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="fu">getSampleSizeSurvival</span><span class="op">(</span>design <span class="op">=</span> <span class="fu"><a href="getDesignGroupSequential.html">getDesignGroupSequential</a></span><span class="op">(</span>kMax <span class="op">=</span> <span class="fl">2</span><span class="op">)</span>, </span></span>
<span class="r-in"><span>    piecewiseSurvivalTime <span class="op">=</span> <span class="va">pws</span>, hazardRatio <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">1.5</span>, <span class="fl">1.8</span>, <span class="fl">2</span><span class="op">)</span><span class="op">)</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># Specification of piecewise exponential survival time for both treatment arms</span></span></span>
<span class="r-in"><span><span class="fu">getSampleSizeSurvival</span><span class="op">(</span>design <span class="op">=</span> <span class="fu"><a href="getDesignGroupSequential.html">getDesignGroupSequential</a></span><span class="op">(</span>kMax <span class="op">=</span> <span class="fl">2</span><span class="op">)</span>, </span></span>
<span class="r-in"><span>    piecewiseSurvivalTime <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">0</span>, <span class="fl">5</span>, <span class="fl">10</span><span class="op">)</span>, lambda2 <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">0.01</span>, <span class="fl">0.02</span>, <span class="fl">0.04</span><span class="op">)</span>, </span></span>
<span class="r-in"><span>    lambda1 <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">0.015</span>, <span class="fl">0.03</span>, <span class="fl">0.06</span><span class="op">)</span><span class="op">)</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># Specification of piecewise exponential survival time as a list</span></span></span>
<span class="r-in"><span><span class="va">pws</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span></span></span>
<span class="r-in"><span>    <span class="st">"0 - &lt;5"</span>  <span class="op">=</span> <span class="fl">0.01</span>,</span></span>
<span class="r-in"><span>    <span class="st">"5 - &lt;10"</span> <span class="op">=</span> <span class="fl">0.02</span>,</span></span>
<span class="r-in"><span>    <span class="st">"&gt;=10"</span>    <span class="op">=</span> <span class="fl">0.04</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="fu">getSampleSizeSurvival</span><span class="op">(</span>design <span class="op">=</span> <span class="fu"><a href="getDesignGroupSequential.html">getDesignGroupSequential</a></span><span class="op">(</span>kMax <span class="op">=</span> <span class="fl">2</span><span class="op">)</span>, </span></span>
<span class="r-in"><span>    piecewiseSurvivalTime <span class="op">=</span> <span class="va">pws</span>, hazardRatio <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">1.5</span>, <span class="fl">1.8</span>, <span class="fl">2</span><span class="op">)</span><span class="op">)</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># Specify effect size based on median survival times</span></span></span>
<span class="r-in"><span><span class="fu">getSampleSizeSurvival</span><span class="op">(</span>median1 <span class="op">=</span> <span class="fl">5</span>, median2 <span class="op">=</span> <span class="fl">3</span><span class="op">)</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># Specify effect size based on median survival times of Weibull distribtion with </span></span></span>
<span class="r-in"><span><span class="co"># kappa = 2</span></span></span>
<span class="r-in"><span><span class="fu">getSampleSizeSurvival</span><span class="op">(</span>median1 <span class="op">=</span> <span class="fl">5</span>, median2 <span class="op">=</span> <span class="fl">3</span>, kappa <span class="op">=</span> <span class="fl">2</span><span class="op">)</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># Identify minimal and maximal required subjects to </span></span></span>
<span class="r-in"><span><span class="co"># reach the required events in spite of dropouts</span></span></span>
<span class="r-in"><span><span class="fu">getSampleSizeSurvival</span><span class="op">(</span>accrualTime <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">0</span>, <span class="fl">18</span><span class="op">)</span>, accrualIntensity <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">20</span>, <span class="fl">30</span><span class="op">)</span>, </span></span>
<span class="r-in"><span>    lambda2 <span class="op">=</span> <span class="fl">0.4</span>, lambda1 <span class="op">=</span> <span class="fl">0.3</span>, followUpTime <span class="op">=</span> <span class="cn">Inf</span>, dropoutRate1 <span class="op">=</span> <span class="fl">0.001</span>, </span></span>
<span class="r-in"><span>    dropoutRate2 <span class="op">=</span> <span class="fl">0.005</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="fu">getSampleSizeSurvival</span><span class="op">(</span>accrualTime <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">0</span>, <span class="fl">18</span><span class="op">)</span>, accrualIntensity <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">20</span>, <span class="fl">30</span><span class="op">)</span>, </span></span>
<span class="r-in"><span>    lambda2 <span class="op">=</span> <span class="fl">0.4</span>, lambda1 <span class="op">=</span> <span class="fl">0.3</span>, followUpTime <span class="op">=</span> <span class="fl">0</span>, dropoutRate1 <span class="op">=</span> <span class="fl">0.001</span>, </span></span>
<span class="r-in"><span>    dropoutRate2 <span class="op">=</span> <span class="fl">0.005</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="op">}</span> <span class="co"># }</span></span></span>
<span class="r-in"><span></span></span>
</code></pre></div>
    </div>
  </main><aside class="col-md-3"><nav id="toc" aria-label="Table of contents"><h2>On this page</h2>
    </nav></aside></div>


    <footer><div class="pkgdown-footer-left">
  <p>Developed by Gernot Wassmer, Friedrich Pahlke.</p>
</div>

<div class="pkgdown-footer-right">
  <p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.1.1.</p>
</div>

    </footer></div>





  </body></html>

