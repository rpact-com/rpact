<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><title>Get Power Counts — getPowerCounts • rpact</title><script src="../deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><link href="../deps/bootstrap-5.3.1/bootstrap.min.css" rel="stylesheet"><script src="../deps/bootstrap-5.3.1/bootstrap.bundle.min.js"></script><link href="../deps/font-awesome-6.4.2/css/all.min.css" rel="stylesheet"><link href="../deps/font-awesome-6.4.2/css/v4-shims.min.css" rel="stylesheet"><script src="../deps/headroom-0.11.0/headroom.min.js"></script><script src="../deps/headroom-0.11.0/jQuery.headroom.min.js"></script><script src="../deps/bootstrap-toc-1.0.1/bootstrap-toc.min.js"></script><script src="../deps/clipboard.js-2.0.11/clipboard.min.js"></script><script src="../deps/search-1.0.0/autocomplete.jquery.min.js"></script><script src="../deps/search-1.0.0/fuse.min.js"></script><script src="../deps/search-1.0.0/mark.min.js"></script><!-- pkgdown --><script src="../pkgdown.js"></script><meta property="og:title" content="Get Power Counts — getPowerCounts"><meta name="description" content="Returns the power, stopping probabilities, and expected sample size for testing mean rates
for negative binomial distributed event numbers in two samples at given sample sizes."><meta property="og:description" content="Returns the power, stopping probabilities, and expected sample size for testing mean rates
for negative binomial distributed event numbers in two samples at given sample sizes."><meta property="og:image" content="https://rpact-com.github.io/rpact/logo.png"></head><body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>


    <nav class="navbar navbar-expand-lg fixed-top bg-light" data-bs-theme="light" aria-label="Site navigation"><div class="container">

    <a class="navbar-brand me-2" href="../index.html">rpact</a>

    <small class="nav-text text-muted me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="">4.1.0</small>


    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto"><li class="active nav-item"><a class="nav-link" href="../reference/index.html">Reference</a></li>
<li class="nav-item dropdown">
  <button class="nav-link dropdown-toggle" type="button" id="dropdown-articles" data-bs-toggle="dropdown" aria-expanded="false" aria-haspopup="true">Articles</button>
  <ul class="dropdown-menu" aria-labelledby="dropdown-articles"><li><a class="dropdown-item" href="../articles/rpact_getting_started.html">Getting started with rpact</a></li>
  </ul></li>
<li class="nav-item"><a class="nav-link" href="../news/index.html">Changelog</a></li>
      </ul><ul class="navbar-nav"><li class="nav-item"><form class="form-inline" role="search">
 <input class="form-control" type="search" name="search-input" id="search-input" autocomplete="off" aria-label="Search site" placeholder="Search for" data-search-index="../search.json"></form></li>
<li class="nav-item"><a class="external-link nav-link" href="https://github.com/rpact-com/rpact/" aria-label="GitHub"><span class="fa fab fa-github fa-lg"></span></a></li>
      </ul></div>


  </div>
</nav><div class="container template-reference-topic">
<div class="row">
  <main id="main" class="col-md-9"><div class="page-header">
      <img src="../logo.png" class="logo" alt=""><h1>Get Power Counts</h1>
      <small class="dont-index">Source: <a href="https://github.com/rpact-com/rpact/blob/main/R/f_design_plan_count_data.R" class="external-link"><code>R/f_design_plan_count_data.R</code></a></small>
      <div class="d-none name"><code>getPowerCounts.Rd</code></div>
    </div>

    <div class="ref-description section level2">
    <p>Returns the power, stopping probabilities, and expected sample size for testing mean rates
for negative binomial distributed event numbers in two samples at given sample sizes.</p>
    </div>

    <div class="section level2">
    <h2 id="ref-usage">Usage<a class="anchor" aria-label="anchor" href="#ref-usage"></a></h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span><span class="fu">getPowerCounts</span><span class="op">(</span></span>
<span>  design <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  <span class="va">...</span>,</span>
<span>  directionUpper <span class="op">=</span> <span class="cn">NA</span>,</span>
<span>  maxNumberOfSubjects <span class="op">=</span> <span class="cn">NA_real_</span>,</span>
<span>  lambda1 <span class="op">=</span> <span class="cn">NA_real_</span>,</span>
<span>  lambda2 <span class="op">=</span> <span class="cn">NA_real_</span>,</span>
<span>  lambda <span class="op">=</span> <span class="cn">NA_real_</span>,</span>
<span>  theta <span class="op">=</span> <span class="cn">NA_real_</span>,</span>
<span>  thetaH0 <span class="op">=</span> <span class="fl">1</span>,</span>
<span>  overdispersion <span class="op">=</span> <span class="fl">0</span>,</span>
<span>  fixedExposureTime <span class="op">=</span> <span class="cn">NA_real_</span>,</span>
<span>  accrualTime <span class="op">=</span> <span class="cn">NA_real_</span>,</span>
<span>  accrualIntensity <span class="op">=</span> <span class="cn">NA_real_</span>,</span>
<span>  followUpTime <span class="op">=</span> <span class="cn">NA_real_</span>,</span>
<span>  allocationRatioPlanned <span class="op">=</span> <span class="cn">NA_real_</span></span>
<span><span class="op">)</span></span></code></pre></div>
    </div>

    <div class="section level2">
    <h2 id="arguments">Arguments<a class="anchor" aria-label="anchor" href="#arguments"></a></h2>


<dl><dt id="arg-design">design<a class="anchor" aria-label="anchor" href="#arg-design"></a></dt>
<dd><p>The trial design. If no trial design is specified, a fixed sample size design is used.
In this case, Type I error rate <code>alpha</code>, Type II error rate <code>beta</code>, <code>twoSidedPower</code>,
and <code>sided</code> can be directly entered as argument where necessary.</p></dd>


<dt id="arg--">...<a class="anchor" aria-label="anchor" href="#arg--"></a></dt>
<dd><p>Ensures that all arguments (starting from the "...") are to be named and
that a warning will be displayed if unknown arguments are passed.</p></dd>


<dt id="arg-directionupper">directionUpper<a class="anchor" aria-label="anchor" href="#arg-directionupper"></a></dt>
<dd><p>Logical. Specifies the direction of the alternative,
only applicable for one-sided testing; default is <code>TRUE</code>
which means that larger values of the test statistics yield smaller p-values.</p></dd>


<dt id="arg-maxnumberofsubjects">maxNumberOfSubjects<a class="anchor" aria-label="anchor" href="#arg-maxnumberofsubjects"></a></dt>
<dd><p><code>maxNumberOfSubjects &gt; 0</code> needs to be specified for power calculations or calculation
of necessary follow-up (count data). For two treatment arms, it is the maximum number of subjects for both treatment arms.</p></dd>


<dt id="arg-lambda-">lambda1<a class="anchor" aria-label="anchor" href="#arg-lambda-"></a></dt>
<dd><p>A numeric value or vector that represents the assumed rate of a homogeneous Poisson process in
the active treatment group, there is no default.</p></dd>


<dt id="arg-lambda-">lambda2<a class="anchor" aria-label="anchor" href="#arg-lambda-"></a></dt>
<dd><p>A numeric value that represents the assumed rate of a homogeneous Poisson process in
the control group, there is no default.</p></dd>


<dt id="arg-lambda">lambda<a class="anchor" aria-label="anchor" href="#arg-lambda"></a></dt>
<dd><p>A numeric value or vector that represents the assumed rate of a homogeneous Poisson process in
the pooled treatment groups, there is no default.</p></dd>


<dt id="arg-theta">theta<a class="anchor" aria-label="anchor" href="#arg-theta"></a></dt>
<dd><p>A numeric value or vector that represents the assumed mean ratios lambda1/lambda2 of a homogeneous
Poisson process, there is no default.</p></dd>


<dt id="arg-thetah-">thetaH0<a class="anchor" aria-label="anchor" href="#arg-thetah-"></a></dt>
<dd><p>The null hypothesis value,
default is <code>0</code> for the normal and the binary case (testing means and rates, respectively),
it is <code>1</code> for the survival case (testing the hazard ratio).<br><br>
For non-inferiority designs, <code>thetaH0</code> is the non-inferiority bound.
That is, in case of (one-sided) testing of</p><ul><li><p><em>means</em>: a value <code>!= 0</code>
(or a value <code>!= 1</code> for testing the mean ratio) can be specified.</p></li>
<li><p><em>rates</em>: a value <code>!= 0</code>
(or a value <code>!= 1</code> for testing the risk ratio <code>pi1 / pi2</code>) can be specified.</p></li>
<li><p><em>survival data</em>: a bound for testing H0: <code>hazard ratio = thetaH0 != 1</code> can be specified.</p></li>
<li><p><em>count data</em>: a bound for testing H0: <code>lambda1 / lambda2 = thetaH0 != 1</code> can be specified.</p></li>
</ul><p>For testing a rate in one sample, a value <code>thetaH0</code> in (0, 1) has to be specified for
defining the null hypothesis H0: <code>pi = thetaH0</code>.</p></dd>


<dt id="arg-overdispersion">overdispersion<a class="anchor" aria-label="anchor" href="#arg-overdispersion"></a></dt>
<dd><p>A numeric value that represents the assumed overdispersion of the negative binomial distribution,
default is <code>0</code>.</p></dd>


<dt id="arg-fixedexposuretime">fixedExposureTime<a class="anchor" aria-label="anchor" href="#arg-fixedexposuretime"></a></dt>
<dd><p>If specified, the fixed time of exposure per subject for count data, there is no default.</p></dd>


<dt id="arg-accrualtime">accrualTime<a class="anchor" aria-label="anchor" href="#arg-accrualtime"></a></dt>
<dd><p>If specified, the assumed accrual time interval(s) for the study, there is no default.</p></dd>


<dt id="arg-accrualintensity">accrualIntensity<a class="anchor" aria-label="anchor" href="#arg-accrualintensity"></a></dt>
<dd><p>If specified, the assumed accrual intensities for the study, there is no default.</p></dd>


<dt id="arg-followuptime">followUpTime<a class="anchor" aria-label="anchor" href="#arg-followuptime"></a></dt>
<dd><p>If specified, the assumed (additional) follow-up time for the study, there is no default.
The total study duration is <code>accrualTime + followUpTime</code>.</p></dd>


<dt id="arg-allocationratioplanned">allocationRatioPlanned<a class="anchor" aria-label="anchor" href="#arg-allocationratioplanned"></a></dt>
<dd><p>The planned allocation ratio <code>n1 / n2</code> for a two treatment groups
design, default is <code>1</code>. For multi-arm designs, it is the allocation ratio relating the active arm(s) to the control.
For simulating means and rates for a two treatment groups design, it can be a vector of length <code>kMax</code>, the number of stages.
It can be a vector of length kMax, too, for multi-arm and enrichment designs.
In these cases, a change of allocating subjects to treatment groups over the stages can be assessed.
Note that internally <code>allocationRatioPlanned</code> is treated as a vector of length <code>kMax</code>, not a scalar.</p></dd>

</dl></div>
    <div class="section level2">
    <h2 id="value">Value<a class="anchor" aria-label="anchor" href="#value"></a></h2>
    <p>Returns a <code><a href="TrialDesignPlan.html">TrialDesignPlan</a></code> object.
The following generics (R generic functions) are available for this result object:</p><ul><li><p><code><a href="names.FieldSet.html">names()</a></code> to obtain the field names,</p></li>
<li><p><code><a href="print.FieldSet.html">print()</a></code> to print the object,</p></li>
<li><p><code><a href="summary.TrialDesignSet.html">summary()</a></code> to display a summary of the object,</p></li>
<li><p><code><a href="plot.TrialDesignPlan.html">plot()</a></code> to plot the object,</p></li>
<li><p><code><a href="as.data.frame.TrialDesignPlan.html">as.data.frame()</a></code> to coerce the object to a <code><a href="https://rdrr.io/r/base/data.frame.html" class="external-link">data.frame</a></code>,</p></li>
<li><p><code><a href="as.matrix.FieldSet.html">as.matrix()</a></code> to coerce the object to a <code><a href="https://rdrr.io/r/base/matrix.html" class="external-link">matrix</a></code>.</p></li>
</ul></div>
    <div class="section level2">
    <h2 id="details">Details<a class="anchor" aria-label="anchor" href="#details"></a></h2>
    <p>At given design the function calculates the power, stopping probabilities, and expected sample size
for testing the ratio of two mean rates of negative binomial distributed event numbers in two samples
at given maximum sample size and effect.
The power calculation is performed either for a fixed exposure time or a variable exposure time with fixed follow-up
where the information over the stages is calculated according to the specified information rate in the design.
Additionally, an allocation ratio = <code>n1 / n2</code> can be specified where <code>n1</code> and <code>n2</code> are the number
of subjects in the two treatment groups. A null hypothesis value <code>thetaH0</code> can also be specified.</p>
    </div>
    <div class="section level2">
    <h2 id="how-to-get-help-for-generic-functions">How to get help for generic functions<a class="anchor" aria-label="anchor" href="#how-to-get-help-for-generic-functions"></a></h2>


<p>Click on the link of a generic in the list above to go directly to the help documentation of
the <code>rpact</code> specific implementation of the generic.
Note that you can use the R function <code><a href="https://rdrr.io/r/utils/methods.html" class="external-link">methods</a></code> to get all the methods of a generic and
to identify the object specific name of it, e.g.,
use <code>methods("plot")</code> to get all the methods for the <code>plot</code> generic.
There you can find, e.g., <code>plot.AnalysisResults</code> and
obtain the specific help documentation linked above by typing <code><a href="plot.AnalysisResults.html">?plot.AnalysisResults</a></code>.</p>
    </div>
    <div class="section level2">
    <h2 id="see-also">See also<a class="anchor" aria-label="anchor" href="#see-also"></a></h2>
    <div class="dont-index"><p>Other power functions:
<code><a href="getPowerMeans.html">getPowerMeans</a>()</code>,
<code><a href="getPowerRates.html">getPowerRates</a>()</code>,
<code><a href="getPowerSurvival.html">getPowerSurvival</a>()</code></p></div>
    </div>

    <div class="section level2">
    <h2 id="ref-examples">Examples<a class="anchor" aria-label="anchor" href="#ref-examples"></a></h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span class="r-in"><span><span class="kw">if</span> <span class="op">(</span><span class="cn">FALSE</span><span class="op">)</span> <span class="op">{</span> <span class="co"># \dontrun{</span></span></span>
<span class="r-in"><span><span class="co"># Fixed sample size trial where a therapy is assumed to decrease the </span></span></span>
<span class="r-in"><span><span class="co"># exacerbation rate from 1.4 to 1.05 (25% decrease) within an </span></span></span>
<span class="r-in"><span><span class="co"># observation period of 1 year, i.e., each subject has a equal </span></span></span>
<span class="r-in"><span><span class="co"># follow-up of 1 year.</span></span></span>
<span class="r-in"><span><span class="co"># Calculate power at significance level 0.025 at given sample size = 180 </span></span></span>
<span class="r-in"><span><span class="co"># for a range of lambda1 values if the overdispersion is assumed to be </span></span></span>
<span class="r-in"><span><span class="co"># equal to 0.5, is obtained by</span></span></span>
<span class="r-in"><span><span class="fu">getPowerCounts</span><span class="op">(</span>alpha <span class="op">=</span> <span class="fl">0.025</span>, lambda1 <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/seq.html" class="external-link">seq</a></span><span class="op">(</span><span class="fl">1</span>, <span class="fl">1.4</span>, <span class="fl">0.05</span><span class="op">)</span>, lambda2 <span class="op">=</span> <span class="fl">1.4</span>, </span></span>
<span class="r-in"><span>    maxNumberOfSubjects <span class="op">=</span> <span class="fl">180</span>, overdispersion <span class="op">=</span> <span class="fl">0.5</span>, fixedExposureTime <span class="op">=</span> <span class="fl">1</span><span class="op">)</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># Group sequential alpha and beta spending function design with O'Brien and </span></span></span>
<span class="r-in"><span><span class="co"># Fleming type boundaries: Power and test characteristics for N = 286, </span></span></span>
<span class="r-in"><span><span class="co"># under the assumption of a fixed exposure time, and for a range of </span></span></span>
<span class="r-in"><span><span class="co"># lambda1 values: </span></span></span>
<span class="r-in"><span><span class="fu">getPowerCounts</span><span class="op">(</span>design <span class="op">=</span> <span class="fu"><a href="getDesignGroupSequential.html">getDesignGroupSequential</a></span><span class="op">(</span></span></span>
<span class="r-in"><span>        kMax <span class="op">=</span> <span class="fl">3</span>, alpha <span class="op">=</span> <span class="fl">0.025</span>, beta <span class="op">=</span> <span class="fl">0.2</span>, </span></span>
<span class="r-in"><span>        typeOfDesign <span class="op">=</span> <span class="st">"asOF"</span>, typeBetaSpending <span class="op">=</span> <span class="st">"bsOF"</span><span class="op">)</span>, </span></span>
<span class="r-in"><span>    lambda1 <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/seq.html" class="external-link">seq</a></span><span class="op">(</span><span class="fl">0.17</span>, <span class="fl">0.23</span>, <span class="fl">0.01</span><span class="op">)</span>, lambda2 <span class="op">=</span> <span class="fl">0.3</span>, </span></span>
<span class="r-in"><span>    directionUpper <span class="op">=</span> <span class="cn">FALSE</span>, overdispersion <span class="op">=</span> <span class="fl">1</span>, maxNumberOfSubjects <span class="op">=</span> <span class="fl">286</span>, </span></span>
<span class="r-in"><span>    fixedExposureTime <span class="op">=</span> <span class="fl">12</span>, accrualTime <span class="op">=</span> <span class="fl">6</span><span class="op">)</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># Group sequential design alpha spending function design with O'Brien and </span></span></span>
<span class="r-in"><span><span class="co"># Fleming type boundaries: Power and test characteristics for N = 1976, </span></span></span>
<span class="r-in"><span><span class="co"># under variable exposure time with uniform recruitment over 1.25 months,</span></span></span>
<span class="r-in"><span><span class="co"># study time (accrual + followup) = 4 (lambda1, lambda2, and overdispersion </span></span></span>
<span class="r-in"><span><span class="co"># as specified, no futility stopping):</span></span></span>
<span class="r-in"><span><span class="fu">getPowerCounts</span><span class="op">(</span>design <span class="op">=</span> <span class="fu"><a href="getDesignGroupSequential.html">getDesignGroupSequential</a></span><span class="op">(</span></span></span>
<span class="r-in"><span>        kMax <span class="op">=</span> <span class="fl">3</span>, alpha <span class="op">=</span> <span class="fl">0.025</span>, beta <span class="op">=</span> <span class="fl">0.2</span>, typeOfDesign <span class="op">=</span> <span class="st">"asOF"</span><span class="op">)</span>,</span></span>
<span class="r-in"><span>    lambda1 <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/seq.html" class="external-link">seq</a></span><span class="op">(</span><span class="fl">0.08</span>, <span class="fl">0.09</span>, <span class="fl">0.0025</span><span class="op">)</span>, lambda2 <span class="op">=</span> <span class="fl">0.125</span>, </span></span>
<span class="r-in"><span>    overdispersion <span class="op">=</span> <span class="fl">5</span>, directionUpper <span class="op">=</span> <span class="cn">FALSE</span>, maxNumberOfSubjects <span class="op">=</span> <span class="fl">1976</span>, </span></span>
<span class="r-in"><span>    followUpTime <span class="op">=</span> <span class="fl">2.75</span>, accrualTime <span class="op">=</span> <span class="fl">1.25</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="op">}</span> <span class="co"># }</span></span></span>
<span class="r-in"><span></span></span>
</code></pre></div>
    </div>
  </main><aside class="col-md-3"><nav id="toc" aria-label="Table of contents"><h2>On this page</h2>
    </nav></aside></div>


    <footer><div class="pkgdown-footer-left">
  <p>Developed by Gernot Wassmer, Friedrich Pahlke.</p>
</div>

<div class="pkgdown-footer-right">
  <p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.1.1.</p>
</div>

    </footer></div>





  </body></html>

